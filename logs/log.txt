[2025-05-10 14:46:09] - logger:_log - INFO - Logger initialized. Logs will be saved to C:\alkashef\GitHub\Select-AI\logs\log.txt
[2025-05-10 14:46:11] - logger:_log - INFO - Using native PyTorch optimizations (no external optimization libraries)
[2025-05-10 14:46:11] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:46:11] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:46:11] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:46:11] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:46:11] - logger:_log - INFO - Initializing database connection at app startup
[2025-05-10 14:46:11] - logger:_log - INFO - TeradataDatabase instance initialized
[2025-05-10 14:46:11] - logger:_log - INFO - Operation 'Database connection' started - Details: {'host': 'raven-env-oe7lr1dbadydeuff.env.clearscape.teradata.com', 'database': 'raven'}
[2025-05-10 14:46:14] - logger:_log - INFO - Operation 'Database connection' completed
[2025-05-10 14:46:14] - logger:_log - INFO - Operation 'Schema retrieval' started
[2025-05-10 14:46:14] - logger:_log - DEBUG - Getting sample data for table: branches
[2025-05-10 14:46:14] - logger:_log - DEBUG - Getting sample data for table: transactions
[2025-05-10 14:46:14] - logger:_log - INFO - Operation 'Schema retrieval' completed - Details: {'tables_count': 2}
[2025-05-10 14:46:14] - logger:_log - INFO - Database connection established and schema cached at startup
[2025-05-10 14:46:15] - logger:_log - INFO - Model 'code-llama-7b-instruct' loading on GPU started
[2025-05-10 14:46:15] - logger:_log - INFO - Creating new NL2SQL instance
[2025-05-10 14:46:15] - logger:_log - INFO - Initializing NL2SQL with model path: ./models/code-llama-7b-instruct
[2025-05-10 14:46:15] - logger:_log - INFO - Loading prompt template from: ./prompt.txt
[2025-05-10 14:46:15] - logger:_log - DEBUG - Prompt template loaded successfully
[2025-05-10 14:46:15] - logger:_log - DEBUG - Returning cached schema
[2025-05-10 14:46:15] - logger:_log - INFO - Database schema cached during initialization
[2025-05-10 14:46:15] - logger:_log - INFO - Loading tokenizer from: ./models/code-llama-7b-instruct
[2025-05-10 14:46:16] - logger:_log - INFO - Tokenizer loaded successfully, proceeding with model loading
[2025-05-10 14:46:16] - logger:_log - INFO - Loading model on GPU: NVIDIA RTX 2000 Ada Generation Laptop GPU
[2025-05-10 14:46:17] - logger:write - ERROR - The `load_in_4bit` and `load_in_8bit` arguments are deprecated and will be removed in the future versions. Please, pass a `BitsAndBytesConfig` object in `quantization_config` argument instead.
[2025-05-10 14:46:17] - cextension:get_native_library - DEBUG - Loading bitsandbytes native library from: C:\Users\aa186095\AppData\Local\anaconda3\envs\raven-env\Lib\site-packages\bitsandbytes\libbitsandbytes_cuda126.dll
[2025-05-10 14:46:17] - logger:flush - INFO - Application started. All messages are being logged to: C:\alkashef\GitHub\Select-AI\logs\log.txt
[2025-05-10 14:46:17] - logger:flush - ERROR - Loading checkpoint shards:   0%|                                                                                | 0/2 [00:00<?, ?it/s]
[2025-05-10 14:46:28] - logger:flush - ERROR - Loading checkpoint shards:  50%|####################################                                    | 1/2 [00:10<00:10, 10.69s/it]
[2025-05-10 14:46:32] - logger:flush - ERROR - Loading checkpoint shards: 100%|########################################################################| 2/2 [00:14<00:00,  6.63s/it]
[2025-05-10 14:46:32] - logger:flush - ERROR - Loading checkpoint shards: 100%|########################################################################| 2/2 [00:14<00:00,  7.24s/it]
[2025-05-10 14:46:32] - logger:_log - INFO - Model loaded on GPU with native PyTorch optimizations
[2025-05-10 14:46:32] - logger:_log - INFO - Performing model warmup with query: 'how many branches are in texas?'
[2025-05-10 14:46:32] - logger:_log - INFO - Processing natural language query: how many branches are in texas?...
[2025-05-10 14:46:32] - logger:_log - DEBUG - Creating prompt prefix cache
[2025-05-10 14:46:32] - logger:_log - DEBUG - Prompt prefix cache created, size: torch.Size([1, 687])
[2025-05-10 14:46:32] - logger:_log - DEBUG - Using cached prompt prefix
[2025-05-10 14:46:32] - logger:_log - INFO - Generating SQL with model
[2025-05-10 14:46:42] - logger:_log - DEBUG - Decoding model output
[2025-05-10 14:46:42] - logger:_log - DEBUG - Extracting SQL query from raw output
[2025-05-10 14:46:42] - logger:_log - DEBUG - Extracting SQL from model output
[2025-05-10 14:46:42] - logger:_log - DEBUG - Running Teradata-specific post-processing
[2025-05-10 14:46:42] - logger:_log - DEBUG - Applying Teradata post-processing to SQL query
[2025-05-10 14:46:42] - logger:_log - DEBUG - Teradata post-processing completed
[2025-05-10 14:46:42] - logger:_log - DEBUG - Successfully extracted SQL: SELECT COUNT(branch_id)
FROM raven.branches
WHERE ...
[2025-05-10 14:46:42] - logger:_log - INFO - Successfully generated SQL query: SELECT COUNT(branch_id)
FROM raven.branches
WHERE ...
[2025-05-10 14:46:42] - logger:_log - INFO - Model warmup completed in 10.27 seconds. Generated SQL: SELECT COUNT(branch_id)
FROM raven.branches
WHERE governorate = 'Texas';
[2025-05-10 14:46:42] - logger:_log - INFO - Model 'code-llama-7b-instruct' loading on GPU completed
[2025-05-10 14:47:50] - logger:_log - INFO - Logger initialized. Logs will be saved to C:\alkashef\GitHub\Select-AI\logs\log.txt
[2025-05-10 14:47:50] - logger:_log - INFO - Using native PyTorch optimizations (no external optimization libraries)
[2025-05-10 14:47:50] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:47:50] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:47:50] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:47:50] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:47:50] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:47:50] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:47:50] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:47:50] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:47:50] - logger:_log - DEBUG - Returning cached schema
[2025-05-10 14:47:52] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:47:52] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:47:52] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:47:52] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:47:52] - logger:_log - DEBUG - Returning cached schema
[2025-05-10 14:47:52] - logger:_log - INFO - Operation 'Query execution' started - Details: {'query': 'SELECT * FROM transactions SAMPLE 5'}
[2025-05-10 14:47:54] - logger:_log - INFO - Operation 'Query execution' completed - Details: {'rows_returned': 5}
[2025-05-10 14:47:55] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:47:55] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:47:55] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:47:55] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:47:55] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:47:55] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:47:55] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:47:55] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:47:58] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:47:58] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:47:58] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:47:58] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:47:58] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:47:58] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:47:58] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:47:58] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:01] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:48:01] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:01] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:48:01] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:01] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:48:01] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:01] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:48:01] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:12] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:48:12] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:12] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:48:12] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:12] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:48:12] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:12] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:48:12] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:12] - logger:_log - INFO - Processing natural language query: what is the avg transaction amount
...
[2025-05-10 14:48:12] - logger:_log - DEBUG - Using cached prompt prefix
[2025-05-10 14:48:12] - logger:_log - INFO - Generating SQL with model
[2025-05-10 14:48:21] - logger:_log - DEBUG - Decoding model output
[2025-05-10 14:48:21] - logger:_log - DEBUG - Extracting SQL query from raw output
[2025-05-10 14:48:21] - logger:_log - DEBUG - Extracting SQL from model output
[2025-05-10 14:48:21] - logger:_log - DEBUG - No semicolon found, appending one and retrying
[2025-05-10 14:48:21] - logger:_log - DEBUG - Extracting SQL from model output
[2025-05-10 14:48:21] - logger:_log - DEBUG - Running Teradata-specific post-processing
[2025-05-10 14:48:21] - logger:_log - DEBUG - Applying Teradata post-processing to SQL query
[2025-05-10 14:48:21] - logger:_log - DEBUG - Teradata post-processing completed
[2025-05-10 14:48:21] - logger:_log - DEBUG - Successfully extracted SQL: SELECT AVG(transaction_amount)
FROM raven.transact...
[2025-05-10 14:48:21] - logger:_log - INFO - Successfully generated SQL query: SELECT AVG(transaction_amount)
FROM raven.transact...
[2025-05-10 14:48:21] - logger:_log - INFO - NL2SQL translation completed in 00:00:09 - Query: what is the avg transaction amount
...
[2025-05-10 14:48:37] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:48:37] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:37] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:48:37] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:37] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:48:37] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:37] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:48:37] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:37] - logger:_log - INFO - Processing natural language query: how many deposits where made in texas?...
[2025-05-10 14:48:37] - logger:_log - DEBUG - Using cached prompt prefix
[2025-05-10 14:48:37] - logger:_log - INFO - Generating SQL with model
[2025-05-10 14:48:47] - logger:_log - DEBUG - Decoding model output
[2025-05-10 14:48:47] - logger:_log - DEBUG - Extracting SQL query from raw output
[2025-05-10 14:48:47] - logger:_log - DEBUG - Extracting SQL from model output
[2025-05-10 14:48:47] - logger:_log - DEBUG - Running Teradata-specific post-processing
[2025-05-10 14:48:47] - logger:_log - DEBUG - Applying Teradata post-processing to SQL query
[2025-05-10 14:48:47] - logger:_log - DEBUG - Teradata post-processing completed
[2025-05-10 14:48:47] - logger:_log - DEBUG - Successfully extracted SQL: SELECT COUNT(transaction_id)
FROM raven.transactio...
[2025-05-10 14:48:47] - logger:_log - INFO - Successfully generated SQL query: SELECT COUNT(transaction_id)
FROM raven.transactio...
[2025-05-10 14:48:47] - logger:_log - INFO - NL2SQL translation completed in 00:00:09 - Query: how many deposits where made in texas?...
[2025-05-10 14:48:49] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:48:49] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:49] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-10 14:48:49] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-10 14:48:49] - logger:_log - INFO - Operation 'Query execution' started - Details: {'query': "SELECT COUNT(transaction_id)\nFROM raven.transactions\nWHERE transaction_type = 'Deposit'\nAND branch_i..."}
[2025-05-10 14:48:51] - logger:_log - INFO - Operation 'Query execution' completed - Details: {'rows_returned': 1}
[2025-05-10 14:48:51] - logger:_log - INFO - SQL execution completed in 00:00:01 - Query: SELECT COUNT(transaction_id)
FROM raven.transactio...
