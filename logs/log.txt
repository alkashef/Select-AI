[2025-05-08 15:51:48] - logger:_log - INFO - Logger initialized. Logs will be saved to C:\alkashef\GitHub\BorAI\logs\log.txt
[2025-05-08 15:52:00] - logger:_log - INFO - Using native PyTorch optimizations (no external optimization libraries)
[2025-05-08 15:52:00] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 15:52:00] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 15:52:00] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 15:52:00] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 15:52:00] - logger:_log - INFO - Initializing database connection at app startup
[2025-05-08 15:52:00] - logger:_log - INFO - TeradataDatabase instance initialized
[2025-05-08 15:52:00] - logger:_log - INFO - Operation 'Database connection' started - Details: {'host': 'raven-env-oe7lr1dbadydeuff.env.clearscape.teradata.com', 'database': 'raven'}
[2025-05-08 15:52:12] - logger:_log - ERROR - Failed to initialize database at startup: [Teradata][teradataml](TDML_2000) Failed to connect to Teradata Vantage.
[2025-05-08 15:55:40] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 15:55:40] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 15:55:40] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 15:55:40] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 15:55:40] - logger:_log - INFO - Initializing database connection at app startup
[2025-05-08 15:55:40] - logger:_log - INFO - TeradataDatabase instance initialized
[2025-05-08 15:55:40] - logger:_log - INFO - Operation 'Database connection' started - Details: {'host': 'raven-env-oe7lr1dbadydeuff.env.clearscape.teradata.com', 'database': 'raven'}
[2025-05-08 15:55:52] - logger:_log - ERROR - Failed to initialize database at startup: [Teradata][teradataml](TDML_2000) Failed to connect to Teradata Vantage.
[2025-05-08 15:56:28] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 15:56:28] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 15:56:28] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 15:56:28] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 15:56:28] - logger:_log - INFO - Initializing database connection at app startup
[2025-05-08 15:56:28] - logger:_log - INFO - TeradataDatabase instance initialized
[2025-05-08 15:56:28] - logger:_log - INFO - Operation 'Database connection' started - Details: {'host': 'raven-env-oe7lr1dbadydeuff.env.clearscape.teradata.com', 'database': 'raven'}
[2025-05-08 15:56:34] - logger:_log - INFO - Operation 'Database connection' completed
[2025-05-08 15:56:34] - logger:_log - INFO - Operation 'Schema retrieval' started
[2025-05-08 15:56:34] - logger:_log - DEBUG - Getting sample data for table: branches
[2025-05-08 15:56:35] - logger:_log - DEBUG - Getting sample data for table: transactions
[2025-05-08 15:56:35] - logger:_log - INFO - Operation 'Schema retrieval' completed - Details: {'tables_count': 2}
[2025-05-08 15:56:35] - logger:_log - INFO - Database connection established and schema cached at startup
[2025-05-08 15:56:35] - logger:_log - INFO - Model 'code-llama-7b-instruct' loading on GPU started
[2025-05-08 15:56:35] - logger:_log - INFO - Creating new NL2SQL instance
[2025-05-08 15:56:35] - logger:_log - INFO - Initializing NL2SQL with model path: ./models/code-llama-7b-instruct
[2025-05-08 15:56:35] - logger:_log - INFO - Loading prompt template from: ./prompt.txt
[2025-05-08 15:56:35] - logger:_log - DEBUG - Prompt template loaded successfully
[2025-05-08 15:56:35] - logger:_log - DEBUG - Returning cached schema
[2025-05-08 15:56:35] - logger:_log - INFO - Database schema cached during initialization
[2025-05-08 15:56:35] - logger:_log - INFO - Loading tokenizer from: ./models/code-llama-7b-instruct
[2025-05-08 15:56:35] - logger:_log - INFO - Tokenizer loaded successfully, proceeding with model loading
[2025-05-08 15:56:35] - logger:_log - INFO - Loading model on GPU: NVIDIA RTX 2000 Ada Generation Laptop GPU
[2025-05-08 15:56:36] - logger:write - ERROR - The `load_in_4bit` and `load_in_8bit` arguments are deprecated and will be removed in the future versions. Please, pass a `BitsAndBytesConfig` object in `quantization_config` argument instead.
[2025-05-08 15:56:36] - cextension:get_native_library - DEBUG - Loading bitsandbytes native library from: C:\Users\aa186095\AppData\Local\anaconda3\envs\raven-env\Lib\site-packages\bitsandbytes\libbitsandbytes_cuda126.dll
[2025-05-08 15:56:36] - logger:flush - INFO - Application started. All messages are being logged to: C:\alkashef\GitHub\BorAI\logs\log.txtApplication started. All messages are being logged to: C:\alkashef\GitHub\BorAI\logs\log.txtApplication started. All messages are being logged to: C:\alkashef\GitHub\BorAI\logs\log.txt
[2025-05-08 15:56:36] - logger:flush - ERROR - Loading checkpoint shards:   0%|                                                                                                                                                                            | 0/2 [00:00<?, ?it/s]
[2025-05-08 15:56:46] - logger:flush - ERROR - Loading checkpoint shards:  50%|##################################################################################                                                                                  | 1/2 [00:09<00:09,  9.80s/it]
[2025-05-08 15:56:50] - logger:flush - ERROR - Loading checkpoint shards: 100%|####################################################################################################################################################################| 2/2 [00:13<00:00,  6.11s/it]
[2025-05-08 15:56:50] - logger:flush - ERROR - Loading checkpoint shards: 100%|####################################################################################################################################################################| 2/2 [00:13<00:00,  6.66s/it]
[2025-05-08 15:56:50] - logger:_log - INFO - Model loaded on GPU with native PyTorch optimizations
[2025-05-08 15:56:50] - logger:_log - INFO - Performing model warmup with query: 'how many branches are in texas?'
[2025-05-08 15:56:50] - logger:_log - INFO - Processing natural language query: how many branches are in texas?...
[2025-05-08 15:56:50] - logger:_log - DEBUG - Creating prompt prefix cache
[2025-05-08 15:56:50] - logger:_log - DEBUG - Prompt prefix cache created, size: torch.Size([1, 707])
[2025-05-08 15:56:50] - logger:_log - DEBUG - Using cached prompt prefix
[2025-05-08 15:56:50] - logger:_log - INFO - Generating SQL with model
[2025-05-08 15:57:00] - logger:_log - DEBUG - Decoding model output
[2025-05-08 15:57:00] - logger:_log - DEBUG - Extracting SQL query from raw output
[2025-05-08 15:57:00] - logger:_log - DEBUG - Extracting SQL from model output
[2025-05-08 15:57:00] - logger:_log - DEBUG - Running Teradata-specific post-processing
[2025-05-08 15:57:00] - logger:_log - DEBUG - Applying Teradata post-processing to SQL query
[2025-05-08 15:57:00] - logger:_log - DEBUG - Teradata post-processing completed
[2025-05-08 15:57:00] - logger:_log - DEBUG - Successfully extracted SQL: SELECT COUNT(branch_id)
FROM raven.branches
WHERE ...
[2025-05-08 15:57:00] - logger:_log - INFO - Successfully generated SQL query: SELECT COUNT(branch_id)
FROM raven.branches
WHERE ...
[2025-05-08 15:57:00] - logger:_log - INFO - Model warmup completed in 10.18 seconds. Generated SQL: SELECT COUNT(branch_id)
FROM raven.branches
WHERE governorate = 'Texas';
[2025-05-08 15:57:00] - logger:_log - INFO - Model 'code-llama-7b-instruct' loading on GPU completed
[2025-05-08 15:57:10] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 15:57:10] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 15:57:10] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 15:57:10] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 15:57:10] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 15:57:10] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 15:57:10] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 15:57:10] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 15:57:10] - logger:_log - INFO - Processing natural language query: what is the avg transaction amount?...
[2025-05-08 15:57:10] - logger:_log - DEBUG - Using cached prompt prefix
[2025-05-08 15:57:10] - logger:_log - INFO - Generating SQL with model
[2025-05-08 15:57:20] - logger:_log - DEBUG - Decoding model output
[2025-05-08 15:57:20] - logger:_log - DEBUG - Extracting SQL query from raw output
[2025-05-08 15:57:20] - logger:_log - DEBUG - Extracting SQL from model output
[2025-05-08 15:57:20] - logger:_log - DEBUG - No semicolon found, appending one and retrying
[2025-05-08 15:57:20] - logger:_log - DEBUG - Extracting SQL from model output
[2025-05-08 15:57:20] - logger:_log - DEBUG - Running Teradata-specific post-processing
[2025-05-08 15:57:20] - logger:_log - DEBUG - Applying Teradata post-processing to SQL query
[2025-05-08 15:57:20] - logger:_log - DEBUG - Teradata post-processing completed
[2025-05-08 15:57:20] - logger:_log - DEBUG - Successfully extracted SQL: SELECT AVG(transaction_amount)
FROM raven.transact...
[2025-05-08 15:57:20] - logger:_log - INFO - Successfully generated SQL query: SELECT AVG(transaction_amount)
FROM raven.transact...
[2025-05-08 15:57:20] - logger:_log - INFO - NL2SQL translation completed in 00:00:09 - Query: what is the avg transaction amount?...
[2025-05-08 17:47:21] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 17:47:21] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 17:47:21] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 17:47:21] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 17:47:21] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 17:47:21] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 17:47:21] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 17:47:21] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 17:47:21] - logger:_log - INFO - Processing natural language query: what are the min, max, avg transaction amounts?...
[2025-05-08 17:47:21] - logger:_log - DEBUG - Using cached prompt prefix
[2025-05-08 17:47:21] - logger:_log - INFO - Generating SQL with model
[2025-05-08 17:47:31] - logger:_log - DEBUG - Decoding model output
[2025-05-08 17:47:31] - logger:_log - DEBUG - Extracting SQL query from raw output
[2025-05-08 17:47:31] - logger:_log - DEBUG - Extracting SQL from model output
[2025-05-08 17:47:31] - logger:_log - DEBUG - No semicolon found, appending one and retrying
[2025-05-08 17:47:31] - logger:_log - DEBUG - Extracting SQL from model output
[2025-05-08 17:47:31] - logger:_log - DEBUG - Running Teradata-specific post-processing
[2025-05-08 17:47:31] - logger:_log - DEBUG - Applying Teradata post-processing to SQL query
[2025-05-08 17:47:31] - logger:_log - DEBUG - Teradata post-processing completed
[2025-05-08 17:47:31] - logger:_log - DEBUG - Successfully extracted SQL: SELECT MIN(transaction_amount), MAX(transaction_am...
[2025-05-08 17:47:31] - logger:_log - INFO - Successfully generated SQL query: SELECT MIN(transaction_amount), MAX(transaction_am...
[2025-05-08 17:47:31] - logger:_log - INFO - NL2SQL translation completed in 00:00:09 - Query: what are the min, max, avg transaction amounts?...
[2025-05-08 17:47:52] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 17:47:52] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 17:47:52] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 17:47:52] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 17:47:52] - logger:_log - INFO - Operation 'Query execution' started - Details: {'query': 'SELECT MIN(transaction_amount), MAX(transaction_amount), AVG(transaction_amount)\nFROM raven.transact...'}
[2025-05-08 17:47:54] - logger:_log - INFO - Operation 'Query execution' completed - Details: {'rows_returned': 1}
[2025-05-08 17:47:54] - logger:_log - INFO - SQL execution completed in 00:00:01 - Query: SELECT MIN(transaction_amount), MAX(transaction_am...
[2025-05-08 17:48:58] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 17:48:58] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 17:48:58] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 17:48:58] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 17:48:58] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 17:48:58] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 17:48:58] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 17:48:58] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 17:48:58] - logger:_log - INFO - Operation 'Query execution' started - Details: {'query': 'SELECT MIN(transaction_amount), MAX(transaction_amount), AVG(transaction_amount)\nFROM raven.transact...'}
[2025-05-08 17:49:00] - logger:_log - ERROR - query execution - Exception: [Version 20.0.0.28] [Session 3555] [Teradata Database] [Error 5628] Column transactions_id not found in raven.transactions.
 at gosqldriver/teradatasql.formatError ErrorUtil.go:85
 at gosqldriver/teradatasql.(*teradataConnection).formatDatabaseError ErrorUtil.go:223
 at gosqldriver/teradatasql.(*teradataConnection).makeChainedDatabaseError ErrorUtil.go:239
 at gosqldriver/teradatasql.(*teradataConnection).processErrorParcel TeradataConnection.go:814
 at gosqldriver/teradatasql.(*TeradataRows).processResponseBundle TeradataRows.go:2412
 at gosqldriver/teradatasql.(*TeradataRows).executeSQLRequest TeradataRows.go:898
 at gosqldriver/teradatasql.newTeradataRows TeradataRows.go:744
 at gosqldriver/teradatasql.(*teradataStatement).QueryContext TeradataStatement.go:122
 at gosqldriver/teradatasql.(*teradataConnection).QueryContext TeradataConnection.go:1333
 at database/sql.ctxDriverQuery ctxutil.go:48
 at database/sql.(*DB).queryDC.func1 sql.go:1786
 at database/sql.withLock sql.go:3574
 at database/sql.(*DB).queryDC sql.go:1781
 at database/sql.(*Conn).QueryContext sql.go:2037
 at main.createRows goside.go:1080
 at main.goCreateRows goside.go:959
 at _cgoexp_ff5e33a08e40_goCreateRows _cgo_gotypes.go:417
 at runtime.cgocallbackg1 cgocall.go:444
 at runtime.cgocallbackg cgocall.go:350
 at runtime.cgocallback asm_amd64.s:1084
 at runtime.goexit asm_amd64.s:1700
[2025-05-08 17:49:00] - logger:_log - ERROR - SQL execution error: Query execution failed: [Version 20.0.0.28] [Session 3555] [Teradata Database] [Error 5628] Column transactions_id not found in raven.transactions.
 at gosqldriver/teradatasql.formatError ErrorUtil.go:85
 at gosqldriver/teradatasql.(*teradataConnection).formatDatabaseError ErrorUtil.go:223
 at gosqldriver/teradatasql.(*teradataConnection).makeChainedDatabaseError ErrorUtil.go:239
 at gosqldriver/teradatasql.(*teradataConnection).processErrorParcel TeradataConnection.go:814
 at gosqldriver/teradatasql.(*TeradataRows).processResponseBundle TeradataRows.go:2412
 at gosqldriver/teradatasql.(*TeradataRows).executeSQLRequest TeradataRows.go:898
 at gosqldriver/teradatasql.newTeradataRows TeradataRows.go:744
 at gosqldriver/teradatasql.(*teradataStatement).QueryContext TeradataStatement.go:122
 at gosqldriver/teradatasql.(*teradataConnection).QueryContext TeradataConnection.go:1333
 at database/sql.ctxDriverQuery ctxutil.go:48
 at database/sql.(*DB).queryDC.func1 sql.go:1786
 at database/sql.withLock sql.go:3574
 at database/sql.(*DB).queryDC sql.go:1781
 at database/sql.(*Conn).QueryContext sql.go:2037
 at main.createRows goside.go:1080
 at main.goCreateRows goside.go:959
 at _cgoexp_ff5e33a08e40_goCreateRows _cgo_gotypes.go:417
 at runtime.cgocallbackg1 cgocall.go:444
 at runtime.cgocallbackg cgocall.go:350
 at runtime.cgocallback asm_amd64.s:1084
 at runtime.goexit asm_amd64.s:1700 - Query: SELECT MIN(transaction_amount), MAX(transaction_am...
[2025-05-08 17:49:12] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 17:49:12] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 17:49:12] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 17:49:12] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 17:49:12] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 17:49:12] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 17:49:12] - PngImagePlugin:call - DEBUG - STREAM b'IHDR' 16 13
[2025-05-08 17:49:12] - PngImagePlugin:call - DEBUG - STREAM b'IDAT' 41 5539
[2025-05-08 17:49:12] - logger:_log - INFO - Operation 'Query execution' started - Details: {'query': 'SELECT MIN(transaction_amount), MAX(transaction_amount), AVG(transaction_amount)\nFROM raven.transact...'}
[2025-05-08 17:49:14] - logger:_log - INFO - Operation 'Query execution' completed - Details: {'rows_returned': 1000}
[2025-05-08 17:49:14] - logger:_log - INFO - SQL execution completed in 00:00:01 - Query: SELECT MIN(transaction_amount), MAX(transaction_am...
